- resource_path = lesson[:file_name] ? lesson_plan_path(lesson[:file_name]) : lesson[:absolute_url]
- is_download = lesson[:file_name].present?
- id = lesson_plan_id(category, index)

%li{:class => ["lesson-plan", (index % 2 == 1 ? "even" : "odd"), ("last" if index == total - 1), ("external" if !is_download)], :id => "LessonPlan#{id}", :'data-scroll-to' => (@scroll_to == id ? "true" : nil)}
  .left-wrap
    %img.lesson-plan-icon{:src => image_path("lesson_plans/#{lesson[:category].to_s}_icon.jpg")}

    = render "icons", :lesson => lesson, :class_ext => "horiz"

    -if is_download
      = link_to resource_path, :class => "pdf-button-small", :download => "" do
        %i.fa.fa-download.fa-lg
    -else
      = link_to resource_path, :class => "pdf-button-small external-lesson-plan" do
        %i.fa.fa-external-link.fa-lg

    %h3.lesson-plan-title= t("lesson_plans.long_titles.#{lesson[:title_key]}")

    = render "icons", :lesson => lesson, :class_ext => "vert"

    .lesson-plan-text 
      .lesson-plan-desc.first= t("lesson_plans.descriptions.#{lesson[:desc_key]}", (lesson[:guide_name] ? {:guide_path => lesson_plan_path(lesson[:guide_name])} : {}))

      %ul.lesson-plan-objectives
        - lesson[:objective_keys].each do |key|
          %li.objective= t "lesson_plans.objectives.#{key}"
    -if is_download
      = link_to resource_path, :class => "pdf-button", :download => "" do
        %i.fa.fa-download.fa-lg
    -else
      = link_to resource_path, :class => "pdf-button" do
        %i.fa.fa-external-link.fa-lg


